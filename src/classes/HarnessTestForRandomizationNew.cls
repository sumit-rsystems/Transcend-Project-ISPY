public with sharing class HarnessTestForRandomizationNew {

	@future (callout = true)
	public static void doRandomize(Id jobId, String testHarnessType) {
		
		List<TrialPatient__c> lstTrialPatient = [Select t.Patient_Id__r.IsTestHarnessPatient__c, t.Patient_Id__c, (Select TrialPatient__c From ArmPatients__r where Id != null) From TrialPatient__c t where Patient_Id__r.IsTestHarnessPatient__c = true and IsRandomized__c = false limit 1];
		if(!lstTrialPatient.isEmpty()) {
			//RandomizePatient.RandomizationResponseWrapper rrw = rb.randomizePatient(lstTrialPatient[0].Id);
			List<RandomizationTestingDetail__c> lstRandTestDetail = [select IsRandomized__c, nSeed1__c, nSeed2__c, Current_Patient_XML__c,Engine_URL__c from RandomizationTestingDetail__c where nSeed1__c != null and nSeed1__c != null and nSeed1__c != 0 and nSeed1__c != 0 order by LastModifiedDate desc limit 1];
			RandomizePatient.RandomizationProperties randProps = getRandomizationProperties(lstRandTestDetail[0]);
			
			List<RandomizationTestingDetail__c> lstRandomizationRecord = [Select r.RandomizationResponse__c,r.Race__c, r.PR__c, r.Name, r.MiddleName__c, r.MP__c, r.Laterality__c, r.LastName__c, r.IsRandomized__c, r.HER2ByTargetPrint__c, r.HER2ByIHC__c, r.HER2ByFISH__c, r.Gender__c, r.FirstName__c, r.Ethnicity__c, r.ER__c, r.DOB__c From RandomizationTestingDetail__c r where IsRandomized__c = false limit 1];
			if(lstRandomizationRecord.isEmpty()) {
				system.debug('No patient found to be randomized in test harness');
				return;
			}
			
			if(testHarnessType == 'Randomization') {
				RandomizePatient.RandomizationData rd = getRandomizationData(lstRandomizationRecord[0]);
				if(rd == null) {
					system.debug('Patient cannot be randomized');
					resetScheduledJobForIneligiblePatient(testHarnessType, jobId);
					return;
				} else {
					RandomizePatient.RandomizationResponseWrapper rrw = RandomizePatient.randomize(false, randProps, rd);
					if(!lstRandTestDetail.isEmpty()) {
						lstRandTestDetail[0].IsRandomized__c = true;
						lstRandTestDetail[0].RandomizationResponse__c = rrw.treatment;
						//Commenting as with new code it is part of internals of randomization
						//lstRandTestDetail[0].Request_XML__c = request_XML;
						lstRandTestDetail[0].nSeed1__c = Decimal.valueOf(rrw.nSeed1);
						lstRandTestDetail[0].nSeed2__c = Decimal.valueOf(rrw.nSeed2);
					}
					update lstRandTestDetail;
					resetScheduledJobForEligblePatient(testHarnessType, jobId);
				}
			} else {
				RandomizationXMLBuilder rb = new RandomizationXMLBuilder();
				rb.randomizePatient(lstTrialPatient[0].Id, false, true);
				List<Randomization_Form__c> rfList = [Select r.Randomization_Result__c From Randomization_Form__c r where TrialPatient__c = : lstTrialPatient[0].Id];
				if(rfList.isEmpty()) {
					system.debug('No Trial Patient found');
				} else {
					if(rfList[0].Randomization_Result__c == null || rfList[0].Randomization_Result__c == '' ||rfList[0].Randomization_Result__c == 'Not Randomized') {
						resetScheduledJobForIneligiblePatient(testHarnessType, jobId);
					} else {
						resetScheduledJobForEligblePatient(testHarnessType, jobId);
					}
				}
			}
		}
	}
	
	private static void resetScheduledJobForIneligiblePatient(String testHarnessType, Id jobId) {
		List<RandomizationSchedulerJobDetail__c> lstRandSchedulerJob = [select Id, jobId__c from RandomizationSchedulerJobDetail__c where Test_Harness_Type__c = :testHarnessType and IsDeleted__c = true];
		if(lstRandSchedulerJob.size() >= 5) {
			Set<String> jobIds = new Set<String>();
			for(RandomizationSchedulerJobDetail__c rs : lstRandSchedulerJob) {
				if(rs.jobId__c != null && rs.jobId__c != '') {
					jobIds.add(rs.jobId__c);
				}
			}
			List<CronTrigger> lstCronTrigger = [select Id from CronTrigger where Id IN :jobIds and State = 'DELETED'];
			for(CronTrigger ct : lstCronTrigger) {
				System.abortJob(ct.Id);
			}
			delete lstRandSchedulerJob;
		}
		RandomizationSchedulerJobDetail__c rSchedulerJob = new RandomizationSchedulerJobDetail__c();
		rSchedulerJob.JobId__c = jobId;
		rSchedulerJob.IsDeleted__c = true;
		rSchedulerJob.Test_Harness_Type__c = testHarnessType;
		insert rSchedulerJob;
	}
	
	private static void resetScheduledJobForEligblePatient(String testHarnessType, Id jobId) {
		List<RandomizationSchedulerJobDetail__c> lstRandSchedulerJob = [select Id, jobId__c from RandomizationSchedulerJobDetail__c where Test_Harness_Type__c = :testHarnessType and IsDeleted__c = true];
		if(lstRandSchedulerJob.size() >= 5) {
			Set<String> jobIds = new Set<String>();
			for(RandomizationSchedulerJobDetail__c rs : lstRandSchedulerJob) {
				if(rs.jobId__c != null && rs.jobId__c != '') {
					jobIds.add(rs.jobId__c);
				}
			}
			List<CronTrigger> lstCronTrigger = [select Id from CronTrigger where Id IN :jobIds and State = 'DELETED'];
			for(CronTrigger ct : lstCronTrigger) {
				System.abortJob(ct.Id);
			}
			delete lstRandSchedulerJob;
		}
		
		RandomizationSchedulerJobDetail__c rSchedulerJob = new RandomizationSchedulerJobDetail__c();
		rSchedulerJob.JobId__c = jobId;
		rSchedulerJob.IsDeleted__c = true;
		rSchedulerJob.Test_Harness_Type__c = testHarnessType;
		insert rSchedulerJob;
	}
	
	private static RandomizePatient.RandomizationProperties getRandomizationProperties(RandomizationTestingDetail__c rtd) {
		RandomizePatient.RandomizationProperties propWrapper = new RandomizePatient.RandomizationProperties();
		if(rtd != null) {
			propWrapper.nSeed1 = (long)rtd.nSeed1__c;
			propWrapper.nSeed2 = (long)rtd.nSeed2__c;
			propWrapper.runCalcResult = '<![CDATA[<?xml version="1.0"?><update_results>	<error>		<description>No error</description>		<code>0</code>	</error>	<timestamp>Thu Nov 22 05:23:57 2012</timestamp>	<required_action>None</required_action>	<arm_status>		<arm name="Control" id="0" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" />		</arm>		<arm name="Neratinib" id="1" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52593" pr_ph3_success="0.359988" pr_best_arm="0.2233" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51957" pr_ph3_success="0.336471" pr_best_arm="0.21197" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51584" pr_ph3_success="0.322502" pr_best_arm="0.2059" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.5183" pr_ph3_success="0.31264" pr_best_arm="0.2077" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49015" pr_ph3_success="0.307458" pr_best_arm="0.18985" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50285" pr_ph3_success="0.302159" pr_best_arm="0.1891" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49592" pr_ph3_success="0.294541" pr_best_arm="0.1947" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50668" pr_ph3_success="0.292569" pr_best_arm="0.19612" />			<signature name="All" status="Open" pr_better_than_control="0.50808" pr_ph3_success="0.336742" />			<signature name="HR+" status="Open" pr_better_than_control="0.49617" pr_ph3_success="0.311665" />			<signature name="HR-" status="Open" pr_better_than_control="0.52007" pr_ph3_success="0.343258" />			<signature name="HER2+" status="Open" pr_better_than_control="0.50904" pr_ph3_success="0.31856" />			<signature name="HER2-" status="Open" pr_better_than_control="0.50938" pr_ph3_success="0.335042" />			<signature name="MP+" status="Open" pr_better_than_control="0.50833" pr_ph3_success="0.322546" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.52332" pr_ph3_success="0.352054" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.51545" pr_ph3_success="0.321633" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.50061" pr_ph3_success="0.2982" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.49633" pr_ph3_success="0.308184" />		</arm>		<arm name="ABT-888" id="2" status="Stopped" n="0" n_pcr="0" n_no_pcr="0" />		<arm name="AMG-386" id="3" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.4747" pr_ph3_success="0.317175" pr_best_arm="0.17984" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.47353" pr_ph3_success="0.306837" pr_best_arm="0.18084" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49525" pr_ph3_success="0.317212" pr_best_arm="0.1944" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.48764" pr_ph3_success="0.302687" pr_best_arm="0.18748" />			<signature name="HER2-" status="Open" pr_better_than_control="0.48147" pr_ph3_success="0.31929" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.47348" pr_ph3_success="0.314626" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.49189" pr_ph3_success="0.314519" />		</arm>		<arm name="Ganitumab" id="4" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49219" pr_ph3_success="0.33434" pr_best_arm="0.17517" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50115" pr_ph3_success="0.315469" pr_best_arm="0.19086" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49004" pr_ph3_success="0.309582" pr_best_arm="0.18607" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50219" pr_ph3_success="0.301039" pr_best_arm="0.19298" />			<signature name="HER2-" status="Open" pr_better_than_control="0.49368" pr_ph3_success="0.322718" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.49562" pr_ph3_success="0.327595" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.49564" pr_ph3_success="0.309347" />		</arm>		<arm name="MK-2206" id="5" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.5114" pr_ph3_success="0.345957" pr_best_arm="0.1988" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51077" pr_ph3_success="0.32152" pr_best_arm="0.19779" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.5076" pr_ph3_success="0.319972" pr_best_arm="0.19897" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51078" pr_ph3_success="0.308069" pr_best_arm="0.19756" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51504" pr_ph3_success="0.330117" pr_best_arm="0.20399" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51893" pr_ph3_success="0.318335" pr_best_arm="0.20806" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51311" pr_ph3_success="0.312884" pr_best_arm="0.20258" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51461" pr_ph3_success="0.301553" pr_best_arm="0.20289" />			<signature name="All" status="Open" pr_better_than_control="0.5098" pr_ph3_success="0.341562" />			<signature name="HR+" status="Open" pr_better_than_control="0.51383" pr_ph3_success="0.329173" />			<signature name="HR-" status="Open" pr_better_than_control="0.50936" pr_ph3_success="0.334498" />			<signature name="HER2+" status="Open" pr_better_than_control="0.5102" pr_ph3_success="0.32498" />			<signature name="HER2-" status="Open" pr_better_than_control="0.51051" pr_ph3_success="0.337307" />			<signature name="MP+" status="Open" pr_better_than_control="0.51233" pr_ph3_success="0.326355" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.5089" pr_ph3_success="0.337171" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.50942" pr_ph3_success="0.319177" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.51392" pr_ph3_success="0.31222" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.5155" pr_ph3_success="0.327996" />		</arm>	</arm_status>	<parameters>		<beta0>			<mean>0.322975</mean>			<SD>3.23338</SD>		</beta0>		<beta>			<mean type="list" length="3">-0.12962,-0.101874,-0.0685196</mean>			<SD type="list" length="3">3.12649,3.14342,3.10275</SD>		</beta>		<OR_beta>			<mean type="list" length="3">107.694,76.72,60.7811</mean>			<SD type="list" length="3">1799.22,953.537,603.487</SD>		</OR_beta>		<theta>			<mean type="list" length="6">0,0.159188,-0.0772473,-0.186567,-0.0502151,0.0954737</mean>			<SD type="list" length="6">0,3.29397,3.24009,3.1433,3.08632,3.15048</SD>		</theta>		<OR_theta>			<mean type="list" length="6">1,194.161,120.29,162.689,91.1096,235.733</mean>			<SD type="list" length="6">0,4972.05,1328.58,3935.69,1292.3,5174.14</SD>		</OR_theta>		<gamma>			<mean type="matrix" nrow="3" ncol="6">0,-0.223484,-0.0505999,0.081147,-0.0274754,0.131541,0,0.0568585,0.0764482,0.18329,0.140681,-0.048437,0,0.100015,-0.11752,-0.0839188,0.0892092,-0.0254048</mean>			<SD type="matrix" nrow="3" ncol="6">0,3.14528,3.29821,3.09334,3.22126,3.13678,0,3.06409,3.1239,3.09693,3.23473,3.19391,0,3.24817,3.16057,3.11571,3.08612,3.20747</SD>		</gamma>		<OR_gamma>			<mean type="matrix" nrow="3" ncol="6">1,117.801,176.424,121.1,135.305,202.367,1,90.4629,88.1277,81.9692,231.992,121.943,1,177.253,271.145,85.3865,127.151,216.499</mean>			<SD type="matrix" nrow="3" ncol="6">0,2637.18,2299.57,2170.78,2369.72,3933.08,0,1857.6,895.902,813.069,4422.31,2303.74,0,2702.47,8177.98,1188.59,2758.42,9504.25</SD>		</OR_gamma>		<alpha>			<mean type="matrix" nrow="3" ncol="13">-2.05858,-1.47055,-1.1186,-0.863441,-0.6294,-0.429461,-0.220584,-0.0102375,0.21111,0.448342,0.723731,1.08522,1.63934,-1.85152,-1.35003,-1.03977,-0.805106,-0.604577,-0.41603,-0.231923,-0.0489374,0.140928,0.354406,0.610392,0.90558,1.43121,-1.88373,-1.37809,-1.06764,-0.833351,-0.632913,-0.445372,-0.262823,-0.0819621,0.105456,0.315371,0.563261,0.849219,1.3426</mean>			<SD type="matrix" nrow="3" ncol="13">0.702815,0.552142,0.507797,0.493424,0.483126,0.477792,0.474757,0.473832,0.472608,0.469048,0.475767,0.510153,0.620727,0.575635,0.455646,0.416227,0.40291,0.401843,0.407583,0.420231,0.440788,0.468771,0.504167,0.554143,0.613216,0.693727,0.571876,0.457945,0.417971,0.405622,0.405266,0.410342,0.420585,0.437291,0.462655,0.494841,0.538609,0.590087,0.658298</SD>		</alpha>		<pi>			<mean type="matrix" nrow="8" ncol="6">0.534758,0.538902,0.51686,0.519665,0.526715,0.53271,0.517001,0.530693,0.499441,0.501089,0.517576,0.515679,0.515828,0.524151,0.50951,0.511494,0.516377,0.517362,0.506557,0.52025,0.497411,0.506417,0.516469,0.511262,0.514882,0.498194,0.499074,0.502451,0.502103,0.520098,0.503494,0.501297,0.491023,0.494162,0.501613,0.51967,0.498136,0.496991,0.495148,0.504437,0.504815,0.50989,0.493518,0.498009,0.486527,0.49898,0.498751,0.509181</mean>			<SD type="matrix" nrow="8" ncol="6">0.37383,0.406304,0.408478,0.408634,0.403074,0.40876,0.408698,0.43472,0.435204,0.431813,0.435215,0.435413,0.41237,0.435974,0.437328,0.438103,0.433493,0.433874,0.425463,0.448965,0.44837,0.446551,0.446598,0.446857,0.407066,0.4331,0.433224,0.436735,0.433754,0.434961,0.426283,0.446296,0.446766,0.445927,0.446664,0.446432,0.425874,0.447791,0.448399,0.449001,0.447488,0.449277,0.435547,0.454444,0.454659,0.45355,0.454703,0.455499</SD>		</pi>		<sig_pi>			<mean type="matrix" nrow="10" ncol="6">0.510651,0.513927,0.500247,0.504923,0.510084,0.517507,0.50289,0.49932,0.493548,0.500588,0.501258,0.515196,0.518377,0.528457,0.505999,0.509229,0.519106,0.519986,0.503215,0.509576,0.497999,0.505302,0.509192,0.512092,0.518081,0.518427,0.502208,0.504152,0.511585,0.522636,0.505563,0.512458,0.494206,0.500437,0.508121,0.515152,0.525923,0.535352,0.508141,0.510392,0.52205,0.525199,0.511231,0.522357,0.503533,0.508519,0.516619,0.514202,0.495624,0.497551,0.490724,0.501627,0.501566,0.509387,0.510088,0.500735,0.496231,0.499484,0.501809,0.520438</mean>			<SD type="matrix" nrow="10" ncol="6">0.381632,0.400296,0.40166,0.401395,0.398939,0.402176,0.410083,0.429884,0.430853,0.431481,0.430226,0.431427,0.389711,0.413118,0.414195,0.413021,0.410114,0.412722,0.411706,0.431189,0.432151,0.4322,0.430239,0.431787,0.388415,0.41088,0.411459,0.412554,0.410267,0.41293,0.41058,0.430756,0.431085,0.428789,0.430286,0.431153,0.385817,0.413949,0.414922,0.413901,0.411952,0.415811,0.41459,0.437224,0.438164,0.437362,0.434864,0.435245,0.426692,0.446427,0.44725,0.447307,0.44666,0.448007,0.41272,0.434384,0.434894,0.4366,0.435273,0.435527</SD>		</sig_pi>		<sig_rate type="list" length="10">1,0.499868,0.500132,0.499569,0.500431,0.499492,0.25037,0.249762,0.249807,0.250061</sig_rate>	</parameters>	<posterior_prob>		<prPBO type="matrix" nrow="8" ncol="6">0,0.52593,0.4881,0.4747,0.49219,0.5114,0,0.51957,0.47784,0.47353,0.50115,0.51077,0,0.51584,0.49949,0.5084,0.5147,0.5076,0,0.5183,0.48374,0.49644,0.51971,0.51078,0,0.49015,0.48861,0.49525,0.49004,0.51504,0,0.50285,0.4846,0.48764,0.50219,0.51893,0,0.49592,0.49314,0.50897,0.50323,0.51311,0,0.50668,0.48033,0.49931,0.51268,0.51461</prPBO>		<prMAX type="matrix" nrow="8" ncol="6">0.03248,0.2233,0.19041,0.17984,0.17517,0.1988,0.03269,0.21197,0.18585,0.18084,0.19086,0.19779,0.03027,0.2059,0.19085,0.18764,0.18637,0.19897,0.03399,0.2077,0.18325,0.18934,0.18816,0.19756,0.0313,0.18985,0.19439,0.1944,0.18607,0.20399,0.03173,0.1891,0.19065,0.18748,0.19298,0.20806,0.0309,0.1947,0.18361,0.19792,0.19029,0.20258,0.03077,0.19612,0.18443,0.19684,0.18895,0.20289</prMAX>		<prPh3 type="matrix" nrow="8" ncol="6">0.0249979,0.359988,0.326226,0.317175,0.33434,0.345957,0.0249979,0.336471,0.305523,0.306837,0.315469,0.32152,0.0249979,0.322502,0.307039,0.314311,0.323645,0.319972,0.0249979,0.31264,0.286027,0.300787,0.31061,0.308069,0.0249979,0.307458,0.311441,0.317212,0.309582,0.330117,0.0249979,0.302159,0.293321,0.302687,0.301039,0.318335,0.0249979,0.294541,0.293832,0.309032,0.302673,0.312884,0.0249979,0.292569,0.27903,0.300021,0.294286,0.301553</prPh3>		<sig_prPBO type="matrix" nrow="10" ncol="6">0,0.50808,0.48384,0.49059,0.50172,0.5098,0,0.49617,0.48673,0.49775,0.50171,0.51383,0,0.52007,0.48543,0.48407,0.50362,0.50936,0,0.50904,0.48898,0.50418,0.51308,0.5102,0,0.50938,0.48316,0.48147,0.49368,0.51051,0,0.50833,0.47937,0.48773,0.50743,0.51233,0,0.52332,0.48286,0.47348,0.49562,0.5089,0,0.51545,0.49242,0.50157,0.5182,0.50942,0,0.50061,0.48769,0.5055,0.50841,0.51392,0,0.49633,0.48683,0.49189,0.49564,0.5155</sig_prPBO>		<sig_prPh3 type="matrix" nrow="10" ncol="6">0,0.336742,0.3181,0.326758,0.330523,0.341562,0,0.311665,0.3065,0.319374,0.31458,0.329173,0,0.343258,0.313628,0.318725,0.32977,0.334498,0,0.31856,0.303972,0.319204,0.323451,0.32498,0,0.335042,0.316503,0.31929,0.322718,0.337307,0,0.322546,0.302846,0.313448,0.317621,0.326355,0,0.352054,0.318475,0.314626,0.327595,0.337171,0,0.321633,0.29984,0.312565,0.323049,0.319177,0,0.2982,0.290891,0.309574,0.303988,0.31222,0,0.308184,0.306671,0.314519,0.309347,0.327996</sig_prPh3>		<prRand type="matrix" nrow="8" ncol="6">0.2,0.209929,0,0.18948,0.196461,0.204129,0.2,0.207308,0,0.188938,0.199958,0.203796,0.2,0.403221,0,0,0,0.396779,0.2,0.402923,0,0,0,0.397077,0.2,0.196998,0,0.199047,0.196953,0.207001,0.2,0.199979,0,0.19393,0.199717,0.206374,0.2,0.393186,0,0,0,0.406814,0.2,0.396894,0,0,0,0.403106</prRand>	</posterior_prob>	<data_summary>		<cellXarm_N type="matrix" nrow="8" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_N>		<cellXarm_pCR type="matrix" nrow="8" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_pCR>		<cellXarm_No_pCR type="matrix" nrow="8" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_No_pCR>		<cellXarmXmricategory type="array3d" dim1="8" dim2="6" dim3="14">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarmXmricategory>		<sigXarm_N type="matrix" nrow="10" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_N>		<sigXarm_pCR type="matrix" nrow="10" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_pCR>		<sigXarm_No_pCR type="matrix" nrow="10" ncol="6">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_No_pCR>	</data_summary>	<trial_specification>		<arm_max_n>120</arm_max_n>		<success_min_n>60</success_min_n>		<futile_min_n>20</futile_min_n>		<graduation_success_prob>0.85</graduation_success_prob>		<graduation_futile_prob>0.1</graduation_futile_prob>		<min_alloc_prob>0.05</min_alloc_prob>		<control_alloc_prob>0.2</control_alloc_prob>		<arms>			<arm name="Control" id="0" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + Trastuzumab" cells="0,0,1,1,0,0,1,1" />				<treatment name="Paclitaxel" cells="1,1,0,0,1,1,0,0" />			</arm>			<arm name="Neratinib" id="1" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + Neratinib" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="ABT-888" id="2" closed="1,1,1,1,1,1,1,1">				<treatment name="Paclitaxel + ABT 888 + Carboplatin" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="AMG-386" id="3" closed="0,0,1,1,0,0,1,1">				<treatment name="Paclitaxel + AMG 386" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="Ganitumab" id="4" closed="0,0,1,1,0,0,1,1">				<treatment name="Paclitaxel + Ganitumab" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="MK-2206" id="5" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + MK-2206 + Trastuzumab" cells="0,0,1,1,0,0,1,1" />				<treatment name="Paclitaxel + MK-2206" cells="1,1,0,0,1,1,0,0" />			</arm>		</arms>		<mri_cuts>     0,-0.1,-0.2,-0.3,-0.4,-0.5,-0.6,-0.7,-0.8,-0.9,-0.95,-0.99  </mri_cuts>		<mcmc_length>100000</mcmc_length>		<mcmc_burnin>10000</mcmc_burnin>		<metsig_alpha>0.25</metsig_alpha>		<metsig_beta0>0.50</metsig_beta0>		<metsig_beta>0.50</metsig_beta>		<metsig_theta>0.50</metsig_theta>		<metsig_gamma>0.50</metsig_gamma>		<p3ss>150</p3ss>		<p3crit>1.96</p3crit>		<ispy1wt>0.2</ispy1wt>		<beta00_mu>0</beta00_mu>		<beta00_var>10</beta00_var>		<beta0_mu>0,0,0</beta0_mu>		<beta0_var>10,10,10</beta0_var>		<theta0_mu>0,0,0,0,0,0</theta0_mu>		<theta0_var>10,10,10,10,10,10</theta0_var>		<dirich_a0>0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1</dirich_a0>		<alpha0_mu>    0,0,0,0,0,0,0,0,0,0,0,0,0,     0,0,0,0,0,0,0,0,0,0,0,0,0,     0,0,0,0,0,0,0,0,0,0,0,0,0  </alpha0_mu>		<alpha0_var>    1,1,1,1,1,1,1,1,1,1,1,1,1,    1,1,1,1,1,1,1,1,1,1,1,1,1,    1,1,1,1,1,1,1,1,1,1,1,1,1  </alpha0_var>		<gamma0_mu>    0,0,0,0,0,0,    0,0,0,0,0,0,    0,0,0,0,0,0  </gamma0_mu>		<gamma0_var>    10,10,10,10,10,10,    10,10,10,10,10,10,    10,10,10,10,10,10  </gamma0_var>		<ispy1_data>			<pcr>      0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0,      0, 0, 0, 0, 1, 1, 1, 0, 99, 0, 0, 99, 0, 99, 1,      1, 0, 99, 99, 99, 99, 0, 1, 99, 0, 99, 0, 0, 0,      1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 99, 0, 1,      99, 1, 0, 0, 1, 99, 1, 0, 1, 99, 1, 99, 1, 0, 0,      99, 99, 0, 0, 0, 0, 1, 0, 0, 1, 99, 0, 1, 0, 0,      1, 0, 0, 99, 0, 0, 0, 1, 99, 0, 0, 0, 0, 99, 0,      99   </pcr>			<hr>     1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1,      1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0,      1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0,      0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0,      0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1,      0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0,      0, 0, 1, 1, 1, 1, 1, 0, 1, 1   </hr>			<her2>     0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1,      0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0,      1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      1, 1, 1, 1, 1, 1, 1, 1, 1, 1   </her2>			<mp>     1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,      1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,      0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1,      1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0,      1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1,      0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 1, 0, 0   </mp>			<mri1>     -0.029, -0.809, -0.051, -0.15, -0.231, -0.582, -0.892, -0.998,      -0.963, -0.35, -0.449, -0.8, -0.922, 99, -0.625, 0.219, -0.436,      -0.41, -0.591, -0.298, -0.737, 99, -0.274, -0.555, -0.856, -0.751,      99, -0.939, 99, -0.968, -0.308, -0.428, 99, -0.912, -0.903, -0.412,      0.486, -0.702, -0.142, -0.387, -0.912, -0.72, 0.128, -0.484,      -0.598, 0.076, -0.609, 99, 0.176, -0.736, 0.183, -0.513, -0.692,      -0.858, -0.367, -0.248, 99, -0.072, 99, 99, -0.373, -0.659, -0.322,      -0.69, -0.651, -0.581, -0.009, 99, 3.212, -0.307, -0.277, 99,      -0.439, -0.023, 99, 99, 0.108, -0.24, 0.645, -0.244, 99, -0.285,      99, -0.176, 99, 0.043, -0.891, -0.262, -0.419, -0.637, -0.77,      -0.676, -0.129, -0.93, 0.494, -0.685, -0.732, 99, -0.591, -0.502,      -0.704, -0.77, 99, -0.139, -0.859   </mri1>			<mri2>     -0.922, -0.971, -0.402, 99, -0.798, -0.993, -0.96, -0.999,      -0.971, -0.981, -0.986, -0.962, -0.944, 99, -0.793, 2.14, -0.742,      -0.91, -0.979, -0.946, -0.916, -0.979, 99, -0.952, -0.93, -0.992,      99, -0.988, -0.972, -0.963, -0.989, -0.456, 99, -0.984, -0.984,      -0.859, -0.313, -0.997, -0.773, -0.371, -0.961, -0.978, -0.543,      -0.829, -0.83, -0.245, 99, 99, -0.988, -0.989, -0.736, -0.865,      -0.799, -0.993, -0.902, -0.875, 99, -0.649, 99, 99, -0.967, -0.985,      -1, -0.804, -0.933, -0.902, -0.959, -0.91, -0.868, -0.903, 99,      99, -0.786, -0.728, -0.895, 99, -0.329, 99, -0.762, 0.005, 99,      -0.02, 99, -0.666, 99, -0.59, -0.97, -0.884, -0.928, -0.929,      99, -0.651, -0.761, -0.451, -0.022, -0.861, -0.707, 99, -0.976,      -0.846, -0.977, -0.976, 99, -0.634, -0.98   </mri2>			<mri3>     -0.253, -0.999, -0.447, 99, -0.816, -1, -0.977, -0.988, -0.984,      -0.973, -0.979, -0.919, 99, 99, -0.923, 99, -0.995, -0.831, -0.783,      -0.962, -0.999, -0.998, -0.287, -1, -0.997, -0.996, 99, -0.986,      -0.977, -1, -1, -0.602, 99, -0.962, -0.999, -0.967, -0.834, 99,      -0.607, -0.365, -0.991, -0.985, -0.741, -0.778, -0.893, -0.709,      99, 99, -0.975, -0.991, -0.364, -0.95, -0.931, 99, -0.949, -0.994,      99, -0.93, 99, 99, -0.981, -0.975, -0.731, -0.82, 99, -0.934,      -0.889, -0.983, -0.081, -0.955, 99, 99, -0.823, -0.802, -0.945,      99, -0.491, -0.944, -0.972, 99, 99, -0.924, 99, -0.477, 99, -0.518,      -0.998, -0.406, -0.991, -0.947, -0.973, -0.816, -0.798, -0.841,      -0.472, -0.983, -0.84, 99, -0.982, -0.966, -0.983, -0.912, 99,      -0.7, -0.979   </mri3>		</ispy1_data>	</trial_specification></update_results>]]>';
			propWrapper.currentPatientXML = rtd.Current_Patient_XML__c;
			propWrapper.engineURL = rtd.Engine_URL__c;
		} else {
			// Hardcode data for first time run, when we might be have nSeed1 = null, nSee2 = null and RunCalculationResult = null
			propWrapper.nSeed1 = 100;
			propWrapper.nSeed2 = 200;
			propWrapper.runCalcResult = '<![CDATA[<?xml version="1.0"?><update_results>	<error>		<description>No error</description>		<code>0</code>	</error>	<timestamp>Mon May 27 07:20:10 2013</timestamp>	<required_action>None</required_action>	<arm_status>		<arm name="Control" id="0" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" />		</arm>		<arm name="Neratinib" id="1" status="Stopped" n="0" n_pcr="0" n_no_pcr="0" />		<arm name="ABT-888" id="2" status="Stopped" n="0" n_pcr="0" n_no_pcr="0" />		<arm name="AMG-386" id="3" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.53884" pr_ph3_success="0.372904" pr_best_arm="0.15747" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.53116" pr_ph3_success="0.345053" pr_best_arm="0.15677" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51942" pr_ph3_success="0.334355" pr_best_arm="0.14768" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52217" pr_ph3_success="0.317707" pr_best_arm="0.1512" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52693" pr_ph3_success="0.346161" pr_best_arm="0.15104" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52723" pr_ph3_success="0.319503" pr_best_arm="0.15465" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52137" pr_ph3_success="0.319949" pr_best_arm="0.14128" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52473" pr_ph3_success="0.305018" pr_best_arm="0.15232" />			<signature name="All" status="Open" pr_better_than_control="0.53222" pr_ph3_success="0.357547" />			<signature name="HR+" status="Open" pr_better_than_control="0.52716" pr_ph3_success="0.337331" />			<signature name="HR-" status="Open" pr_better_than_control="0.53041" pr_ph3_success="0.353208" />			<signature name="HER2+" status="Open" pr_better_than_control="0.52324" pr_ph3_success="0.333502" />			<signature name="HER2-" status="Open" pr_better_than_control="0.53537" pr_ph3_success="0.358404" />			<signature name="MP+" status="Open" pr_better_than_control="0.52729" pr_ph3_success="0.336541" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.53757" pr_ph3_success="0.363645" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.52186" pr_ph3_success="0.330194" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.52414" pr_ph3_success="0.318163" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.52748" pr_ph3_success="0.337115" />		</arm>		<arm name="Ganitumab" id="4" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52722" pr_ph3_success="0.358597" pr_best_arm="0.14897" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50837" pr_ph3_success="0.325772" pr_best_arm="0.1575" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50019" pr_ph3_success="0.325667" pr_best_arm="0.13588" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49737" pr_ph3_success="0.303296" pr_best_arm="0.13937" />			<signature name="HER2-" status="Open" pr_better_than_control="0.51105" pr_ph3_success="0.338134" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.51844" pr_ph3_success="0.345066" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.49828" pr_ph3_success="0.318616" />		</arm>		<arm name="MK-2206" id="5" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51163" pr_ph3_success="0.347674" pr_best_arm="0.1467" />			<cell name="HR-, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.51222" pr_ph3_success="0.330053" pr_best_arm="0.138" />			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.48911" pr_ph3_success="0.31811" pr_best_arm="0.1356" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49272" pr_ph3_success="0.300831" pr_best_arm="0.1342" />			<cell name="HR+, HER2-, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50703" pr_ph3_success="0.332944" pr_best_arm="0.14677" />			<cell name="HR+, HER2-, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50843" pr_ph3_success="0.315787" pr_best_arm="0.14775" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.48834" pr_ph3_success="0.303182" pr_best_arm="0.14444" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49628" pr_ph3_success="0.29521" pr_best_arm="0.14316" />			<signature name="All" status="Open" pr_better_than_control="0.5034" pr_ph3_success="0.338354" />			<signature name="HR+" status="Open" pr_better_than_control="0.501" pr_ph3_success="0.324755" />			<signature name="HR-" status="Open" pr_better_than_control="0.50268" pr_ph3_success="0.332532" />			<signature name="HER2+" status="Open" pr_better_than_control="0.49251" pr_ph3_success="0.316598" />			<signature name="HER2-" status="Open" pr_better_than_control="0.51123" pr_ph3_success="0.340106" />			<signature name="MP+" status="Open" pr_better_than_control="0.5034" pr_ph3_success="0.323468" />			<signature name="(-,-,*)" status="Open" pr_better_than_control="0.51166" pr_ph3_success="0.341231" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.49038" pr_ph3_success="0.312642" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.49282" pr_ph3_success="0.303965" />			<signature name="(+,-,*)" status="Open" pr_better_than_control="0.50741" pr_ph3_success="0.328317" />		</arm>		<arm name="Pertuzumab" id="6" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.46656" pr_ph3_success="0.296188" pr_best_arm="0.12951" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.46353" pr_ph3_success="0.275541" pr_best_arm="0.12706" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.48088" pr_ph3_success="0.291491" pr_best_arm="0.13253" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.46763" pr_ph3_success="0.266535" pr_best_arm="0.13049" />			<signature name="HER2+" status="Open" pr_better_than_control="0.46936" pr_ph3_success="0.294327" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.46454" pr_ph3_success="0.289935" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.47414" pr_ph3_success="0.282693" />		</arm>		<arm name="T-DM1 + Pertuzumab" id="7" status="Open" n="0" n_pcr="0" n_no_pcr="0">			<cell name="HR-, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52483" pr_ph3_success="0.339686" pr_best_arm="0.15749" />			<cell name="HR-, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.52098" pr_ph3_success="0.316205" pr_best_arm="0.15885" />			<cell name="HR+, HER2+, MP-" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.49924" pr_ph3_success="0.313758" pr_best_arm="0.1554" />			<cell name="HR+, HER2+, MP+" n="0" n_pcr="0" n_no_pcr="0" pr_better_than_control="0.50942" pr_ph3_success="0.304253" pr_best_arm="0.14964" />			<signature name="HER2+" status="Open" pr_better_than_control="0.51307" pr_ph3_success="0.331408" />			<signature name="(-,+,*)" status="Open" pr_better_than_control="0.52326" pr_ph3_success="0.333153" />			<signature name="(+,+,*)" status="Open" pr_better_than_control="0.50443" pr_ph3_success="0.314764" />		</arm>	</arm_status>	<parameters>		<beta0>			<mean>-0.232352</mean>			<SD>3.26704</SD>		</beta0>		<beta>			<mean type="list" length="3">-0.107477,0.135429,0.2119</mean>			<SD type="list" length="3">3.17533,3.07738,3.10249</SD>		</beta>		<OR_beta>			<mean type="list" length="3">126.096,96.1057,130.673</mean>			<SD type="list" length="3">2235.19,1464.1,1641.15</SD>		</OR_beta>		<theta>			<mean type="list" length="8">0,-0.121288,-0.051024,0.278611,0.204112,0.0635044,-0.333501,0.211586</mean>			<SD type="list" length="8">0,3.197,3.15836,3.10662,3.15211,3.14093,3.08068,3.14294</SD>		</theta>		<OR_theta>			<mean type="list" length="8">1,129.411,139.226,106.049,101.464,89.0701,62.9429,80.2874</mean>			<SD type="list" length="8">0,2230.84,2881.88,1973.85,1576.92,1018.06,1115.32,644.992</SD>		</OR_theta>		<gamma>			<mean type="matrix" nrow="3" ncol="8">0,-0.26022,-0.0454305,0.0430952,-0.129832,-0.0530886,-0.0105697,-0.22069,0,-0.22591,-0.0709141,-0.029334,0.187542,-0.158673,0.0433911,0.0484857,0,0.235035,-0.129522,0.116181,-0.0810277,-0.0119819,-0.151086,0.0787357</mean>			<SD type="matrix" nrow="3" ncol="8">0,3.07816,3.20477,3.03626,3.22489,3.15002,3.0965,3.28331,0,3.25411,3.09488,3.16808,3.11723,3.15985,3.19551,3.19304,0,3.16463,3.21112,3.19896,3.1589,3.11144,3.21002,3.213</SD>		</gamma>		<OR_gamma>			<mean type="matrix" nrow="3" ncol="8">1,82.034,123.365,60.838,81.3557,79.2502,97.9637,78.9745,1,89.6002,64.8917,107.326,144.702,71.0063,235.35,126.023,1,148.686,109.228,150.693,77.8939,59.3952,149.025,289.285</mean>			<SD type="matrix" nrow="3" ncol="8">0,1077.28,1209.01,654.749,901.851,1106.6,1828.01,922.148,0,1840.81,707.916,2528.61,3122.65,857.04,4930.35,2271.5,0,1882.76,968.468,2635.04,729.206,616.009,3443.79,5624.98</SD>		</OR_gamma>		<alpha>			<mean type="matrix" nrow="3" ncol="13">-2.01747,-1.4406,-1.0897,-0.833393,-0.601811,-0.40425,-0.200286,0.00805932,0.227416,0.460341,0.733479,1.08982,1.63677,-1.84137,-1.33811,-1.02924,-0.792586,-0.589539,-0.397616,-0.211017,-0.024863,0.169363,0.387364,0.649005,0.948185,1.47532,-1.84589,-1.34589,-1.03726,-0.802139,-0.59897,-0.407955,-0.221434,-0.035643,0.154923,0.368245,0.622008,0.915485,1.4208</mean>			<SD type="matrix" nrow="3" ncol="13">0.694257,0.555264,0.507502,0.492316,0.481002,0.475382,0.472585,0.471828,0.470894,0.470394,0.477376,0.509004,0.625495,0.576018,0.461423,0.423933,0.41082,0.409803,0.415608,0.427556,0.447233,0.474751,0.510416,0.562848,0.621585,0.699091,0.569051,0.45449,0.414794,0.399711,0.397661,0.400903,0.409996,0.42754,0.45263,0.484226,0.529529,0.583815,0.657806</SD>		</alpha>		<pi>			<mean type="matrix" nrow="8" ncol="8">0.469967,0.464575,0.477072,0.503448,0.491106,0.47876,0.455704,0.504962,0.493604,0.501866,0.482513,0.521072,0.503326,0.504889,0.465712,0.513956,0.486399,0.475756,0.485056,0.509043,0.51264,0.487568,0.470478,0.505387,0.503516,0.502957,0.484609,0.521324,0.522948,0.50114,0.475169,0.516419,0.467533,0.45498,0.474054,0.50191,0.478764,0.480877,0.454044,0.483151,0.487492,0.48661,0.47844,0.513256,0.494346,0.498666,0.463326,0.49856,0.474552,0.458446,0.476261,0.506167,0.499398,0.478142,0.464461,0.491432,0.495429,0.483089,0.481066,0.518013,0.506341,0.496545,0.472901,0.506886</mean>			<SD type="matrix" nrow="8" ncol="8">0.377197,0.41014,0.408957,0.412659,0.415357,0.407155,0.407495,0.410833,0.409541,0.435617,0.434751,0.435001,0.436038,0.434434,0.430639,0.43438,0.409918,0.437249,0.432083,0.434266,0.434809,0.433209,0.435599,0.436667,0.423816,0.446893,0.445357,0.446016,0.444619,0.445163,0.444648,0.446361,0.408222,0.433612,0.434291,0.434956,0.436088,0.434431,0.43097,0.437226,0.424827,0.446228,0.447873,0.445757,0.447704,0.44768,0.444996,0.445572,0.423662,0.446198,0.444315,0.447312,0.446835,0.446055,0.443676,0.449091,0.434056,0.453688,0.45347,0.454961,0.454692,0.454061,0.452774,0.452711</SD>		</pi>		<sig_pi>			<mean type="matrix" nrow="10" ncol="8">0.483919,0.477707,0.479373,0.512124,0.501096,0.491275,0.464113,0.502336,0.480995,0.47071,0.476712,0.510574,0.495169,0.48967,0.463828,0.495466,0.488845,0.485697,0.482354,0.514841,0.508607,0.494127,0.466718,0.510802,0.489333,0.479431,0.481261,0.513286,0.509109,0.490785,0.469484,0.504302,0.479336,0.476554,0.477244,0.510188,0.492199,0.490304,0.459499,0.501455,0.494605,0.492542,0.481687,0.518377,0.506136,0.500964,0.469796,0.509371,0.481948,0.482532,0.48006,0.51311,0.497804,0.492465,0.460752,0.510475,0.495281,0.489136,0.484539,0.515173,0.517681,0.493971,0.472647,0.511113,0.485032,0.470296,0.478317,0.511886,0.502746,0.487803,0.468219,0.499073,0.478044,0.471225,0.47562,0.507565,0.487125,0.490204,0.459012,0.491009</mean>			<SD type="matrix" nrow="10" ncol="8">0.381172,0.400932,0.397632,0.400992,0.400917,0.400358,0.397025,0.400246,0.409982,0.429845,0.429113,0.430348,0.431283,0.430806,0.427986,0.430628,0.390012,0.414009,0.410606,0.413082,0.414417,0.411273,0.410395,0.412855,0.409387,0.431167,0.427756,0.430215,0.429458,0.429877,0.429025,0.431167,0.388874,0.412593,0.412207,0.412796,0.41434,0.412885,0.408875,0.41256,0.41,0.430077,0.429808,0.430746,0.429373,0.430216,0.42712,0.428287,0.388097,0.416559,0.415282,0.417065,0.419358,0.414934,0.412874,0.41606,0.412556,0.437283,0.433434,0.435045,0.434567,0.433982,0.43521,0.436573,0.42517,0.445635,0.444192,0.446228,0.446482,0.446141,0.444107,0.446316,0.412256,0.434847,0.436068,0.434867,0.436733,0.436313,0.433224,0.436121</SD>		</sig_pi>		<sig_rate type="list" length="10">1,0.499084,0.500916,0.501608,0.498392,0.49865,0.249331,0.251585,0.250022,0.249062</sig_rate>	</parameters>	<posterior_prob>		<prPBO type="matrix" nrow="8" ncol="8">0,0.48291,0.50518,0.53884,0.52722,0.51163,0.45928,0.52975,0,0.50491,0.47676,0.53116,0.50837,0.51222,0.45772,0.53005,0,0.46672,0.50404,0.51942,0.53755,0.48911,0.46656,0.52483,0,0.48781,0.48691,0.52217,0.52533,0.49272,0.46353,0.52098,0,0.47105,0.49083,0.52693,0.50019,0.50703,0.46805,0.49728,0,0.48568,0.48262,0.52723,0.49737,0.50843,0.45853,0.50874,0,0.45821,0.49654,0.52137,0.51269,0.48834,0.48088,0.49924,0,0.46768,0.48187,0.52473,0.5139,0.49628,0.46763,0.50942</prPBO>		<prMAX type="matrix" nrow="8" ncol="8">0.00419,0.13084,0.13669,0.15747,0.14897,0.1467,0.11648,0.15866,0.00922,0.14425,0.1287,0.15677,0.1575,0.138,0.11159,0.15397,0.00845,0.13052,0.13249,0.14768,0.15826,0.1356,0.12951,0.15749,0.00842,0.13537,0.12674,0.1512,0.15816,0.1342,0.12706,0.15885,0.00679,0.12787,0.1519,0.15104,0.13588,0.14677,0.12628,0.15347,0.00948,0.13573,0.13809,0.15465,0.13937,0.14775,0.12328,0.15165,0.00806,0.12603,0.14561,0.14128,0.14665,0.14444,0.13253,0.1554,0.00818,0.13499,0.13597,0.15232,0.14525,0.14316,0.13049,0.14964</prMAX>		<prPh3 type="matrix" nrow="8" ncol="8">0.0249979,0.331235,0.349445,0.372904,0.358597,0.347674,0.310272,0.373131,0.0249979,0.326035,0.301455,0.345053,0.325772,0.330053,0.286983,0.341275,0.0249979,0.298611,0.324478,0.334355,0.351526,0.31811,0.296188,0.339686,0.0249979,0.300249,0.291118,0.317707,0.325677,0.300831,0.275541,0.316205,0.0249979,0.305421,0.324161,0.346161,0.325667,0.332944,0.302039,0.330973,0.0249979,0.298337,0.291668,0.319503,0.303296,0.315787,0.273207,0.316625,0.0249979,0.282062,0.30996,0.319949,0.318137,0.303182,0.291491,0.313758,0.0249979,0.27539,0.281074,0.305018,0.298375,0.29521,0.266535,0.304253</prPh3>		<sig_prPBO type="matrix" nrow="10" ncol="8">0,0.47909,0.49442,0.53222,0.52073,0.5034,0.46861,0.51838,0,0.47221,0.4889,0.52716,0.50502,0.501,0.47074,0.5053,0,0.48366,0.49399,0.53041,0.52804,0.50268,0.46076,0.52603,0,0.46972,0.49534,0.52324,0.52624,0.49251,0.46936,0.51307,0,0.48844,0.49026,0.53537,0.51105,0.51123,0.46325,0.52162,0,0.48634,0.48109,0.52729,0.51281,0.5034,0.46441,0.5179,0,0.49459,0.49029,0.53757,0.51844,0.51166,0.45755,0.52973,0,0.47668,0.49706,0.52186,0.53354,0.49038,0.46454,0.52326,0,0.4631,0.48896,0.52414,0.51152,0.49282,0.47414,0.50443,0,0.47915,0.48803,0.52748,0.49828,0.50741,0.46477,0.50392</sig_prPBO>		<sig_prPh3 type="matrix" nrow="10" ncol="8">0,0.320233,0.33054,0.357547,0.348971,0.338354,0.305076,0.351912,0,0.301908,0.314294,0.337331,0.324119,0.324755,0.295236,0.330979,0,0.319148,0.326091,0.353208,0.351989,0.332532,0.299146,0.353468,0,0.301141,0.315524,0.333502,0.336961,0.316598,0.294327,0.331408,0,0.325053,0.325319,0.358404,0.338134,0.340106,0.300732,0.353242,0,0.310702,0.302624,0.336541,0.326821,0.323468,0.287146,0.333304,0,0.330941,0.327877,0.363645,0.345066,0.341231,0.300588,0.36165,0,0.30283,0.312809,0.330194,0.343196,0.312642,0.289935,0.333153,0,0.282183,0.299745,0.318163,0.312334,0.303965,0.282693,0.314764,0,0.306931,0.311608,0.337115,0.318616,0.328317,0.291125,0.328586</sig_prPh3>		<prRand type="matrix" nrow="8" ncol="8">0.2,0,0,0.27323,0.267338,0.259432,0,0,0.2,0,0,0.273838,0.262089,0.264073,0,0,0.2,0,0,0.207776,0,0.195652,0.186631,0.20994,0.2,0,0,0.208931,0,0.197147,0.185468,0.208455,0.2,0,0,0.274774,0.26083,0.264397,0,0,0.2,0,0,0.275131,0.259549,0.26532,0,0,0.2,0,0,0.209614,0,0.196334,0.193335,0.200717,0.2,0,0,0.210096,0,0.198705,0.187234,0.203966</prRand>	</posterior_prob>	<data_summary>		<cellXarm_N type="matrix" nrow="8" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_N>		<cellXarm_pCR type="matrix" nrow="8" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_pCR>		<cellXarm_No_pCR type="matrix" nrow="8" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarm_No_pCR>		<cellXarmXmricategory type="array3d" dim1="8" dim2="8" dim3="14">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</cellXarmXmricategory>		<sigXarm_N type="matrix" nrow="10" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_N>		<sigXarm_pCR type="matrix" nrow="10" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_pCR>		<sigXarm_No_pCR type="matrix" nrow="10" ncol="8">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</sigXarm_No_pCR>	</data_summary>	<trial_specification>		<arm_max_n>120</arm_max_n>		<success_min_n>60</success_min_n>		<futile_min_n>20</futile_min_n>		<graduation_success_prob>0.85</graduation_success_prob>		<graduation_futile_prob>0.1</graduation_futile_prob>		<min_alloc_prob>0.05</min_alloc_prob>		<control_alloc_prob>0.2</control_alloc_prob>		<arms>			<arm name="Control" id="0" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + Trastuzumab" cells="0,0,1,1,0,0,1,1" />				<treatment name="Paclitaxel" cells="1,1,0,0,1,1,0,0" />			</arm>			<arm name="Neratinib" id="1" closed="1,1,1,1,1,1,1,1">				<treatment name="Paclitaxel + Neratinib" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="ABT-888" id="2" closed="1,1,1,1,1,1,1,1">				<treatment name="Paclitaxel + ABT 888 + Carboplatin" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="AMG-386" id="3" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + AMG 386 + Trastuzumab" cells="0,0,1,1,0,0,1,1" />				<treatment name="Paclitaxel + AMG 386" cells="1,1,0,0,1,1,0,0" />			</arm>			<arm name="Ganitumab" id="4" closed="0,0,1,1,0,0,1,1">				<treatment name="Paclitaxel + Ganitumab" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="MK-2206" id="5" closed="0,0,0,0,0,0,0,0">				<treatment name="Paclitaxel + MK-2206 + Trastuzumab" cells="0,0,1,1,0,0,1,1" />				<treatment name="Paclitaxel + MK-2206" cells="1,1,0,0,1,1,0,0" />			</arm>			<arm name="Pertuzumab" id="6" closed="1,1,0,0,1,1,0,0">				<treatment name="Paclitaxel + Pertuzumab + Trastuzumab" cells="1,1,1,1,1,1,1,1" />			</arm>			<arm name="T-DM1 + Pertuzumab" id="7" closed="1,1,0,0,1,1,0,0">				<treatment name="T-DM1 + Pertuzumab" cells="1,1,1,1,1,1,1,1" />			</arm>		</arms>		<mri_cuts>     0,-0.1,-0.2,-0.3,-0.4,-0.5,-0.6,-0.7,-0.8,-0.9,-0.95,-0.99  </mri_cuts>		<mcmc_length>100000</mcmc_length>		<mcmc_burnin>10000</mcmc_burnin>		<metsig_alpha>0.25</metsig_alpha>		<metsig_beta0>0.50</metsig_beta0>		<metsig_beta>0.50</metsig_beta>		<metsig_theta>0.50</metsig_theta>		<metsig_gamma>0.50</metsig_gamma>		<p3ss>150</p3ss>		<p3crit>1.96</p3crit>		<ispy1wt>0.2</ispy1wt>		<beta00_mu>0</beta00_mu>		<beta00_var>10</beta00_var>		<beta0_mu>0,0,0</beta0_mu>		<beta0_var>10,10,10</beta0_var>		<theta0_mu>0,0,0,0,0,0,0,0</theta0_mu>		<theta0_var>10,10,10,10,10,10,10,10</theta0_var>		<dirich_a0>0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1</dirich_a0>		<alpha0_mu>    0,0,0,0,0,0,0,0,0,0,0,0,0,     0,0,0,0,0,0,0,0,0,0,0,0,0,     0,0,0,0,0,0,0,0,0,0,0,0,0  </alpha0_mu>		<alpha0_var>    1,1,1,1,1,1,1,1,1,1,1,1,1,    1,1,1,1,1,1,1,1,1,1,1,1,1,    1,1,1,1,1,1,1,1,1,1,1,1,1  </alpha0_var>		<gamma0_mu>    0,0,0,0,0,0,0,0,    0,0,0,0,0,0,0,0,    0,0,0,0,0,0,0,0  </gamma0_mu>		<gamma0_var>    10,10,10,10,10,10,10,10,    10,10,10,10,10,10,10,10,    10,10,10,10,10,10,10,10  </gamma0_var>		<ispy1_data>			<pcr>      0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0,      0, 0, 0, 0, 1, 1, 1, 0, 99, 0, 0, 99, 0, 99, 1,      1, 0, 99, 99, 99, 99, 0, 1, 99, 0, 99, 0, 0, 0,      1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 99, 0, 1,      99, 1, 0, 0, 1, 99, 1, 0, 1, 99, 1, 99, 1, 0, 0,      99, 99, 0, 0, 0, 0, 1, 0, 0, 1, 99, 0, 1, 0, 0,      1, 0, 0, 99, 0, 0, 0, 1, 99, 0, 0, 0, 0, 99, 0,      99   </pcr>			<hr>     1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1,      1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0,      1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0,      0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0,      0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1,      0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0,      0, 0, 1, 1, 1, 1, 1, 0, 1, 1   </hr>			<her2>     0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1,      0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0,      1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,      1, 1, 1, 1, 1, 1, 1, 1, 1, 1   </her2>			<mp>     1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,      1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,      0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1,      1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0,      1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1,      0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,      0, 0, 0, 0, 0, 0, 0, 1, 0, 0   </mp>			<mri1>     -0.029, -0.809, -0.051, -0.15, -0.231, -0.582, -0.892, -0.998,      -0.963, -0.35, -0.449, -0.8, -0.922, 99, -0.625, 0.219, -0.436,      -0.41, -0.591, -0.298, -0.737, 99, -0.274, -0.555, -0.856, -0.751,      99, -0.939, 99, -0.968, -0.308, -0.428, 99, -0.912, -0.903, -0.412,      0.486, -0.702, -0.142, -0.387, -0.912, -0.72, 0.128, -0.484,      -0.598, 0.076, -0.609, 99, 0.176, -0.736, 0.183, -0.513, -0.692,      -0.858, -0.367, -0.248, 99, -0.072, 99, 99, -0.373, -0.659, -0.322,      -0.69, -0.651, -0.581, -0.009, 99, 3.212, -0.307, -0.277, 99,      -0.439, -0.023, 99, 99, 0.108, -0.24, 0.645, -0.244, 99, -0.285,      99, -0.176, 99, 0.043, -0.891, -0.262, -0.419, -0.637, -0.77,      -0.676, -0.129, -0.93, 0.494, -0.685, -0.732, 99, -0.591, -0.502,      -0.704, -0.77, 99, -0.139, -0.859   </mri1>			<mri2>     -0.922, -0.971, -0.402, 99, -0.798, -0.993, -0.96, -0.999,      -0.971, -0.981, -0.986, -0.962, -0.944, 99, -0.793, 2.14, -0.742,      -0.91, -0.979, -0.946, -0.916, -0.979, 99, -0.952, -0.93, -0.992,      99, -0.988, -0.972, -0.963, -0.989, -0.456, 99, -0.984, -0.984,      -0.859, -0.313, -0.997, -0.773, -0.371, -0.961, -0.978, -0.543,      -0.829, -0.83, -0.245, 99, 99, -0.988, -0.989, -0.736, -0.865,      -0.799, -0.993, -0.902, -0.875, 99, -0.649, 99, 99, -0.967, -0.985,      -1, -0.804, -0.933, -0.902, -0.959, -0.91, -0.868, -0.903, 99,      99, -0.786, -0.728, -0.895, 99, -0.329, 99, -0.762, 0.005, 99,      -0.02, 99, -0.666, 99, -0.59, -0.97, -0.884, -0.928, -0.929,      99, -0.651, -0.761, -0.451, -0.022, -0.861, -0.707, 99, -0.976,      -0.846, -0.977, -0.976, 99, -0.634, -0.98   </mri2>			<mri3>     -0.253, -0.999, -0.447, 99, -0.816, -1, -0.977, -0.988, -0.984,      -0.973, -0.979, -0.919, 99, 99, -0.923, 99, -0.995, -0.831, -0.783,      -0.962, -0.999, -0.998, -0.287, -1, -0.997, -0.996, 99, -0.986,      -0.977, -1, -1, -0.602, 99, -0.962, -0.999, -0.967, -0.834, 99,      -0.607, -0.365, -0.991, -0.985, -0.741, -0.778, -0.893, -0.709,      99, 99, -0.975, -0.991, -0.364, -0.95, -0.931, 99, -0.949, -0.994,      99, -0.93, 99, 99, -0.981, -0.975, -0.731, -0.82, 99, -0.934,      -0.889, -0.983, -0.081, -0.955, 99, 99, -0.823, -0.802, -0.945,      99, -0.491, -0.944, -0.972, 99, 99, -0.924, 99, -0.477, 99, -0.518,      -0.998, -0.406, -0.991, -0.947, -0.973, -0.816, -0.798, -0.841,      -0.472, -0.983, -0.84, 99, -0.982, -0.966, -0.983, -0.912, 99,      -0.7, -0.979   </mri3>		</ispy1_data>	</trial_specification></update_results>]]>';
			propWrapper.currentPatientXML = '<![CDATA[<current_patients></current_patients>]]>';
			propWrapper.engineURL = 'http://128.120.38.17:8081/services/ISpy2WebService';
		}
		return propWrapper;
	}
	
	private static RandomizePatient.RandomizationData getRandomizationData(RandomizationTestingDetail__c rtd) {
		
		RandomizePatient.RandomizationData rd = new RandomizePatient.RandomizationData();
		rd.subjectId = rtd.Name;
		
		Date baseDate = Date.newInstance(1950, 1, 1);
		Date todaysDate = Date.today();
		rd.startTime = baseDate.daysBetween(todaysDate);
    	
    	String er = null;
    	if(rtd.ER__c == '1' || rtd.ER__c == '+') {
			er = '1';
		} else {
			er = '0';
		}
			
    	if(rtd.ER__c == '1' || rtd.PR__c == '1') {
			rd.hr = 1;
		} else {
			rd.hr = 0;
		}
		
		if(rtd.HER2ByFISH__c == '1' || rtd.HER2ByIHC__c == '1' || rtd.HER2ByTargetPrint__c == '1') {
			rd.her2 = 1;
		} else {
			rd.her2 = 0;
		}
    	
    	if(rtd.HER2ByFISH__c == '1' || rtd.HER2ByIHC__c == '1' || rtd.HER2ByTargetPrint__c == '1') {
			rd.her2 = 1;
		} else {
			rd.her2 = 0;
		}
    	rd.mpValue = (rtd.MP__c == 'High' || rtd.MP__c == '1' || rtd.MP__c == '+')?1:0;
    	
    	if(er == '1' && rd.her2 == 0 && rd.mpValue == 0) {
			system.debug('Patient not eligible for randomization: er == \'1\' && her2 == 0 && mp == 0');
			return null;
		}
		
    	rd.pcrOutcometime = -1;
    	rd.pcrOutcome = rd.startTime + 1;
    	rd.earlyTreatmentTime = rd.startTime + 1;
    	rd.interRegimenTime = rd.startTime + 1;
    	rd.preSurgeryTime = rd.startTime + 1;
    	rd.changeimMRIVolumeMonth2 = -1;
    	rd.changeimMRIVolumeMonth4 = -1;
    	rd.changeimMRIVolumeMonth6 = -1;
    	return rd;
	}
}